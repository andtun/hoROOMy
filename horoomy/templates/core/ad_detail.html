{% extends 'base.html' %}

{% block title %} {{ ad.flat.location.address }} {% endblock %}

{% block head %}
<script type="text/javascript" xmlns="http://www.w3.org/1999/html">
    ymaps.ready(init);
    var myMap,
        myPlacemark;

    function init(){
        myMap = new ymaps.Map("map", {
            center: [{{ coords }}],
            zoom: 17
        });

        myPlacemark = new ymaps.Placemark([{{ coords }}], {
            balloonContent: '{{ ad.flat.location.address }}'
        });

        myMap.geoObjects.add(myPlacemark);
    }
</script>
{% endblock %}


{% block content %}
<div class="ad-detail">
    <h1> {{ ad.flat.location.address }} </h1>
    <div class="flex">
        <div class="flex-item-left">
            <h2 class="cost">{{ ad.flat.cost }} &#8381; / мес</h2>
            <div class="description">
                <p class="description-content"> {{ ad.description }} </p>
            </div>
            <div class="info">
                <h3 class="title"> <strong>Общая информация:</strong> </h3>
                <p>
                    • Площадь: {{ ad.flat.area }} м<sup>2</sup><br>
                    • Кол-во комнат: {{ ad.flat.rooms }}<br>
                    • Адрес: {{ ad.flat.location.address }}<br>
                    • Метро: {% for metro in ad.flat.metros.all %} <a href="#" class="metro">м. {{ metro.name }}</a> {% endfor %}<br>
                </p>
            </div>
            <div class="map">
                <h3> <strong>На карте:</strong> </h3>
                <div id="map" style="width: 650px; height: 400px" class="img-map"></div>
            </div>
        </div>
        <div class="contacts-info">
            <h4>Размещено: {{ ad.created }}</h4>
            <ul class="bxslider">
                {% for image in images %}
                    <li><img src="{{ image.url }}" class="img-responsive"></li>
                {% endfor %}
            </ul>
            <div class="owner-info">
                <h3><strong>О владельце:</strong></h3>
                <h4>• Контактный номер: <strong>{{ ad.contacts.phone }}</strong></h4>
                {% if ad.contacts.vk %}
                    <h4>• Вконтакте: <strong>{{ ad.contacts.vk }}</strong></h4>
                {% endif %}
            </div>

        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        $('.bxslider').bxSlider({
            slideWidth: 600,
            speed: 500,
            auto: true,
            pause: 5000
        });
    });
</script>
{% endblock %}